!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("addon/mode/simple.js",["../../lib/codemirror"],b):b(CodeMirror)}(function(b){function n(h,a){if(!h.hasOwnProperty(a))throw Error("Undefined state "+a+" in simple mode");}function x(h,a){if(!h)return/(?:)/;var b="";return h instanceof RegExp?(h.ignoreCase&&(b="i"),h=h.source):h=String(h),new RegExp((!1===a?"":"^")+"(?:"+h+")",b)}function y(h){if(!h)return null;
if(h.apply)return h;if("string"==typeof h)return h.replace(/\./g," ");for(var a=[],b=0;b<h.length;b++)a.push(h[b]&&h[b].replace(/\./g," "));return a}function a(a,b){(a.next||a.push)&&n(b,a.next||a.push);this.regex=x(a.regex);this.token=y(a.token);this.data=a}function g(a,g){return function(p,c){if(c.pending){var f=c.pending.shift();return 0==c.pending.length&&(c.pending=null),p.pos+=f.text.length,f.token}if(c.local){if(c.local.end&&p.match(c.local.end))return f=c.local.endToken||null,c.local=c.localState=
null,f;var m,f=c.local.mode.token(p,c.localState);return c.local.endScan&&(m=c.local.endScan.exec(p.current()))&&(p.pos=p.start+m.index),f}for(var q=a[c.state],k=0;k<q.length;k++)if(f=q[k],m=(!f.data.sol||p.sol())&&p.match(f.regex)){f.data.next?c.state=f.data.next:f.data.push?((c.stack||(c.stack=[])).push(c.state),c.state=f.data.push):f.data.pop&&c.stack&&c.stack.length&&(c.state=c.stack.pop());if(f.data.mode){var l=g,q=c,k=f.data.mode,n=f.token,t=void 0;if(k.persistent)for(var z=q.persistentStates;z&&
!t;z=z.next)(k.spec?e(k.spec,z.spec):k.mode==z.mode)&&(t=z);l=t?t.mode:k.mode||b.getMode(l,k.spec);z=t?t.state:b.startState(l);k.persistent&&!t&&(q.persistentStates={mode:l,spec:k.spec,state:z,next:q.persistentStates});q.localState=z;q.local={mode:l,end:k.end&&x(k.end),endScan:k.end&&!1!==k.forceEnd&&x(k.end,!1),endToken:n&&n.join?n[n.length-1]:n}}f.data.indent&&c.indent.push(p.indentation()+g.indentUnit);f.data.dedent&&c.indent.pop();q=f.token;if(q&&q.apply&&(q=q(m)),2<m.length&&f.token&&"string"!=
typeof f.token){c.pending=[];for(k=2;k<m.length;k++)m[k]&&c.pending.push({text:m[k],token:f.token[k-1]});return p.backUp(m[0].length-(m[1]?m[1].length:0)),q[0]}return q&&q.join?q[0]:q}return p.next(),null}}function e(a,b){if(a===b)return!0;if(!a||"object"!=typeof a||!b||"object"!=typeof b)return!1;var g=0,c;for(c in a)if(a.hasOwnProperty(c)){if(!b.hasOwnProperty(c)||!e(a[c],b[c]))return!1;g++}for(c in b)b.hasOwnProperty(c)&&g--;return 0==g}function l(a,g){return function(e,c,f){if(e.local&&e.local.mode.indent)return e.local.mode.indent(e.localState,
c,f);if(!(f=null==e.indent||e.local)&&(f=g.dontIndentStates)){a:{f=g.dontIndentStates;for(var m=0;m<f.length;m++)if(f[m]===e.state){f=!0;break a}f=void 0}f=-1<f}if(f)return b.Pass;f=e.indent.length-1;m=a[e.state];a:for(;;){for(var l=0;l<m.length;l++){var k=m[l];if(k.data.dedent&&!1!==k.data.dedentIfLineStart){var n=k.regex.exec(c);if(n&&n[0]){f--;(k.next||k.push)&&(m=a[k.next||k.push]);c=c.slice(n[0].length);continue a}}}break}return 0>f?0:e.indent[f]}}b.defineSimpleMode=function(a,e){b.defineMode(a,
function(a){return b.simpleMode(a,e)})};b.simpleMode=function(e,r){n(r,"start");var p={},c=r.meta||{},f=!1,m;for(m in r)if(m!=c&&r.hasOwnProperty(m))for(var q=p[m]=[],k=r[m],x=0;x<k.length;x++){var y=k[x];q.push(new a(y,r));(y.indent||y.dedent)&&(f=!0)}p={startState:function(){return{state:"start",pending:null,local:null,localState:null,indent:f?[]:null}},copyState:function(a){var e={state:a.state,pending:a.pending,local:a.local,localState:null,indent:a.indent&&a.indent.slice(0)};a.localState&&(e.localState=
b.copyState(a.local.mode,a.localState));a.stack&&(e.stack=a.stack.slice(0));for(var c=a.persistentStates;c;c=c.next)e.persistentStates={mode:c.mode,spec:c.spec,state:c.state==a.localState?e.localState:b.copyState(c.mode,c.state),next:e.persistentStates};return e},token:g(p,e),innerMode:function(a){return a.local&&{mode:a.local.mode,state:a.localState}},indent:l(p,c)};if(c)for(var t in c)c.hasOwnProperty(t)&&(p[t]=c[t]);return p}});
(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("addon/mode/multiplex",["../../lib/codemirror"],b):b(CodeMirror)})(function(b){b.multiplexingMode=function(n){function x(a,b,e,l){return"string"==typeof b?(e=a.indexOf(b,e),l&&-1<e?e+b.length:e):(b=b.exec(e?a.slice(e):a))?b.index+e+(l?b[0].length:0):-1}var y=Array.prototype.slice.call(arguments,1);return{startState:function(){return{outer:b.startState(n),innerActive:null,
inner:null}},copyState:function(a){return{outer:b.copyState(n,a.outer),innerActive:a.innerActive,inner:a.innerActive&&b.copyState(a.innerActive.mode,a.inner)}},token:function(a,g){if(g.innerActive){var e=g.innerActive,l=a.string;if(!e.close&&a.sol())return g.innerActive=g.inner=null,this.token(a,g);var h=e.close?x(l,e.close,a.pos,e.parseDelimiters):-1;if(h==a.pos&&!e.parseDelimiters)return a.match(e.close),g.innerActive=g.inner=null,e.delimStyle&&e.delimStyle+" "+e.delimStyle+"-close";-1<h&&(a.string=
l.slice(0,h));var r=e.mode.token(a,g.inner);return-1<h&&(a.string=l),h==a.pos&&e.parseDelimiters&&(g.innerActive=g.inner=null),e.innerStyle&&(r=r?r+" "+e.innerStyle:e.innerStyle),r}for(var r=1/0,l=a.string,p=0;p<y.length;++p){e=y[p];h=x(l,e.open,a.pos);if(h==a.pos)return e.parseDelimiters||a.match(e.open),g.innerActive=e,l=0,n.indent&&(h=n.indent(g.outer,"",""),h!==b.Pass&&(l=h)),g.inner=b.startState(e.mode,l),e.delimStyle&&e.delimStyle+" "+e.delimStyle+"-open";-1!=h&&h<r&&(r=h)}r!=1/0&&(a.string=
l.slice(0,r));h=n.token(a,g.outer);return r!=1/0&&(a.string=l),h},indent:function(a,g,e){var l=a.innerActive?a.innerActive.mode:n;return l.indent?l.indent(a.innerActive?a.inner:a.outer,g,e):b.Pass},blankLine:function(a){var g=a.innerActive?a.innerActive.mode:n;if(g.blankLine&&g.blankLine(a.innerActive?a.inner:a.outer),a.innerActive)"\n"===a.innerActive.close&&(a.innerActive=a.inner=null);else for(var e=0;e<y.length;++e){var l=y[e];"\n"===l.open&&(a.innerActive=l,a.inner=b.startState(l.mode,g.indent?
g.indent(a.outer,"",""):0))}},electricChars:n.electricChars,innerMode:function(a){return a.inner?{state:a.inner,mode:a.innerActive.mode}:{state:a.outer,mode:n}}}}});
(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror"),require("../../addon/mode/simple"),require("../../addon/mode/multiplex")):"function"==typeof define&&define.amd?define("mode/handlebars/handlebars.js",["../../lib/codemirror","../../addon/mode/simple","../../addon/mode/multiplex"],b):b(CodeMirror)})(function(b){b.defineSimpleMode("handlebars-tags",{start:[{regex:/\{\{!--/,push:"dash_comment",token:"comment"},{regex:/\{\{!/,push:"comment",token:"comment"},
{regex:/\{\{/,push:"handlebars",token:"tag"}],handlebars:[{regex:/\}\}/,pop:!0,token:"tag"},{regex:/"(?:[^\\"]|\\.)*"?/,token:"string"},{regex:/'(?:[^\\']|\\.)*'?/,token:"string"},{regex:/>|[#\/]([A-Za-z_]\w*)/,token:"keyword"},{regex:/(?:else|this)\b/,token:"keyword"},{regex:/\d+/i,token:"number"},{regex:/=|~|@|true|false/,token:"atom"},{regex:/(?:\.\.\/)*(?:[A-Za-z_][\w\.]*)+/,token:"variable-2"}],dash_comment:[{regex:/--\}\}/,pop:!0,token:"comment"},{regex:/./,token:"comment"}],comment:[{regex:/\}\}/,
pop:!0,token:"comment"},{regex:/./,token:"comment"}],meta:{blockCommentStart:"{{--",blockCommentEnd:"--}}"}});b.defineMode("handlebars",function(n,x){var y=b.getMode(n,"handlebars-tags");return x&&x.base?b.multiplexingMode(b.getMode(n,x.base),{open:"{{",close:"}}",mode:y,parseDelimiters:!0}):y});b.defineMIME("text/x-handlebars-template","handlebars")});
(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("mode/xml/xml.js",["../../lib/codemirror"],b):b(CodeMirror)})(function(b){var n={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},
contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},
allowUnquoted:!0,allowMissing:!0,caseFold:!0},x={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};b.defineMode("xml",function(y,a){function g(u,a){function d(b){return a.tokenize=b,b(u,a)}var b=u.next();if("\x3c"==b)return u.eat("!")?u.eat("[")?u.match("CDATA[")?d(h("atom","]]\x3e")):null:u.match("--")?d(h("comment","--\x3e")):u.match("DOCTYPE",!0,!0)?(u.eatWhile(/[\w\._\-]/),d(r(1))):null:u.eat("?")?(u.eatWhile(/[\w\._\-]/),
a.tokenize=h("meta","?\x3e"),"meta"):(A=u.eat("/")?"closeTag":"openTag",a.tokenize=e,"tag bracket");if("\x26"==b){var c;return c=u.eat("#")?u.eat("x")?u.eatWhile(/[a-fA-F\d]/)&&u.eat(";"):u.eatWhile(/[\d]/)&&u.eat(";"):u.eatWhile(/[\w\.\-:]/)&&u.eat(";"),c?"atom":"error"}return u.eatWhile(/[^&<]/),null}function e(a,b){var d=a.next();return"\x3e"==d||"/"==d&&a.eat("\x3e")?(b.tokenize=g,A="\x3e"==d?"endTag":"selfcloseTag","tag bracket"):"\x3d"==d?(A="equals",null):"\x3c"==d?(b.tokenize=g,b.state=m,
b.tagName=b.tagStart=null,(d=b.tokenize(a,b))?d+" tag error":"tag error"):/[\'\"]/.test(d)?(b.tokenize=l(d),b.stringStartCol=a.column(),b.tokenize(a,b)):(a.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function l(a){var b=function(b,c){for(;!b.eol();)if(b.next()==a){c.tokenize=e;break}return"string"};return b.isInAttribute=!0,b}function h(a,b){return function(d,c){for(;!d.eol();){if(d.match(b)){c.tokenize=g;break}d.next()}return a}}function r(a){return function(b,d){for(var c;null!=(c=
b.next());){if("\x3c"==c)return d.tokenize=r(a+1),d.tokenize(b,d);if("\x3e"==c){if(1==a){d.tokenize=g;break}return d.tokenize=r(a-1),d.tokenize(b,d)}}return"meta"}}function p(a,b,d){this.prev=a.context;this.tagName=b;this.indent=a.indented;this.startOfLine=d;(v.doNotIndent.hasOwnProperty(b)||a.context&&a.context.noIndent)&&(this.noIndent=!0)}function c(a){a.context&&(a.context=a.context.prev)}function f(a,b){for(var d;a.context&&(d=a.context.tagName,v.contextGrabbers.hasOwnProperty(d)&&v.contextGrabbers[d].hasOwnProperty(b));)c(a)}
function m(a,b,d){return"openTag"==a?(d.tagStart=b.column(),q):"closeTag"==a?k:m}function q(a,b,d){return"word"==a?(d.tagName=b.current(),w="tag",t):v.allowMissingTagName&&"endTag"==a?(w="tag bracket",t(a,b,d)):(w="error",q)}function k(a,b,d){return"word"==a?(a=b.current(),d.context&&d.context.tagName!=a&&v.implicitlyClosed.hasOwnProperty(d.context.tagName)&&c(d),d.context&&d.context.tagName==a||!1===v.matchClosing?(w="tag",C):(w="tag error",E)):v.allowMissingTagName&&"endTag"==a?(w="tag bracket",
C(a,b,d)):(w="error",E)}function C(a,b,d){return"endTag"!=a?(w="error",C):(c(d),m)}function E(a,b,d){return w="error",C(a,b,d)}function t(a,b,d){if("word"==a)return w="attribute",z;if("endTag"==a||"selfcloseTag"==a){b=d.tagName;var c=d.tagStart;return d.tagName=d.tagStart=null,"selfcloseTag"==a||v.autoSelfClosers.hasOwnProperty(b)?f(d,b):(f(d,b),d.context=new p(d,b,c==d.indented)),m}return w="error",t}function z(a,b,d){return"equals"==a?F:(v.allowMissing||(w="error"),t(a,b,d))}function F(a,b,d){return"string"==
a?G:"word"==a&&v.allowUnquoted?(w="string",t):(w="error",t(a,b,d))}function G(a,b,d){return"string"==a?G:t(a,b,d)}var D=y.indentUnit,v={},H=a.htmlMode?n:x,B;for(B in H)v[B]=H[B];for(B in a)v[B]=a[B];var A,w;return g.isInText=!0,{startState:function(a){var b={tokenize:g,state:m,indented:a||0,tagName:null,tagStart:null,context:null};return null!=a&&(b.baseIndent=a),b},token:function(a,b){if(!b.tagName&&a.sol()&&(b.indented=a.indentation()),a.eatSpace())return null;A=null;var d=b.tokenize(a,b);return(d||
A)&&"comment"!=d&&(w=null,b.state=b.state(A||d,a,b),w&&(d="error"==w?d+" error":w)),d},indent:function(a,c,d){var f=a.context;if(a.tokenize.isInAttribute)return a.tagStart==a.indented?a.stringStartCol+1:a.indented+D;if(f&&f.noIndent)return b.Pass;if(a.tokenize!=e&&a.tokenize!=g)return d?d.match(/^(\s*)/)[0].length:0;if(a.tagName)return!1!==v.multilineTagIndentPastTag?a.tagStart+a.tagName.length+2:a.tagStart+D*(v.multilineTagIndentFactor||1);if(v.alignCDATA&&/<!\[CDATA\[/.test(c))return 0;if((c=c&&
/^<(\/)?([\w_:\.-]*)/.exec(c))&&c[1])for(;f;){if(f.tagName==c[2]){f=f.prev;break}if(!v.implicitlyClosed.hasOwnProperty(f.tagName))break;f=f.prev}else if(c)for(;f;){d=v.contextGrabbers[f.tagName];if(!d||!d.hasOwnProperty(c[2]))break;f=f.prev}for(;f&&f.prev&&!f.startOfLine;)f=f.prev;return f?f.indent+D:a.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:v.htmlMode?"html":"xml",helperType:v.htmlMode?"html":"xml",skipAttribute:function(a){a.state==
F&&(a.state=t)}}});b.defineMIME("text/xml","xml");b.defineMIME("application/xml","xml");b.mimeModes.hasOwnProperty("text/html")||b.defineMIME("text/html",{name:"xml",htmlMode:!0})});(function(b){"function"==typeof b.define&&b.define("modeHandlebars",["mode/handlebars/handlebars.js"],function(){})})(this);